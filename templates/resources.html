{% extends "base.html" %}
{% block content %}

<h3 class="mb-3">Resources</h3>

<form method="GET" class="row g-3 mb-4">

  <div class="col-md-3">
    <select name="branch" class="form-control">
      <option value="">All Branches</option>
      <option>CSE</option>
      <option>ECE</option>
      <option>EEE</option>
      <option>ME</option>
      <option>CE</option>
    </select>
  </div>

  <div class="col-md-3">
    <select name="semester" class="form-control">
      <option value="">All Semesters</option>
      <option>Semester 1</option>
      <option>Semester 2</option>
      <option>Semester 3</option>
      <option>Semester 4</option>
      <option>Semester 5</option>
      <option>Semester 6</option>
    </select>
  </div>

  <div class="col-md-3">
    <select name="note_type" class="form-control">
      <option value="">All Types</option>
      <option value="Notes">Notes</option>
      <option value="Question Bank">Question Bank</option>
    </select>
  </div>

  <div class="col-md-3">
    <button class="btn btn-success w-100">Apply Filters</button>
  </div>

</form>

<table class="table resource-table">
  <thead>
    <tr>
      <th>Title</th>
      <th>Subject</th>
      <th>Branch</th>
      <th>Semester</th>
      <th>Type</th>
      <th>Download</th>
    </tr>
  </thead>

  <tbody>
  {% for r in data %}
    <tr class="resource-row">
      <td>
        <strong>{{ r[1] }}</strong>
        {% if r[8] == "verified" %}
          <span class="badge bg-success ms-2">âœ” Verified</span>
        {% endif %}
      </td>

      <td>
        
        {{ r[2] }}
      </td>

      <td>
        
        {{ r[5] }}
      </td>

      <td>
        
        {{ r[3] }}
      </td>

      <td>
        {% if r[7] == "Notes" %}
          <span class="type-badge type-notes">Notes</span>
        {% else %}
          <span class="type-badge type-question">Question Bank</span>
        {% endif %}
      </td>

      <td>
        <a href="/download/{{ r[4] }}" class="btn btn-primary btn-sm download-btn">
          <i class="fa-solid fa-download me-1"></i> Download
        </a>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>


{% if data|length == 0 %}
<p class="text-muted">No resources found for selected filters.</p>
{% endif %}

{% endblock %}
